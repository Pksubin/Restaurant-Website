{% extends 'base.html' %}
{% block title %}Your Order{% endblock %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

<style>
.order-page {
    padding: 40px 20px;
    min-height: calc(100vh - 200px);
}

.order-page h2 {
    text-align: center;
    font-size: 2.5rem;
    margin-bottom: 40px;
    font-weight: 700;
    color: #333;
}

.table thead {
    background-color: #f4f4f4;
    font-weight: 600;
}

.table tbody tr:hover {
    background-color: #f1f5f9;
    transition: 0.2s;
}

.table td, .table th {
    vertical-align: middle;
    font-size: 1rem;
}

.btn-quantity {
    padding: 4px 10px;
    font-size: 1rem;
    border-radius: 6px;
    margin: 0 3px;
    width: 32px;
    height: 32px;
}

.btn-remove {
    font-size: 0.9rem;
}

.order-summary-footer {
    margin-top: 30px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
}

.order-summary-footer .total {
    font-size: 1.5rem;
    font-weight: 700;
    color: #ff6600;
}

.order-summary-footer form {
    min-width: 250px;
    flex-grow: 1;
    max-width: 400px;
}

.order-summary-footer input {
    margin-bottom: 10px;
    padding: 10px;
    border-radius: 6px;
    border: 1px solid #ccc;
}

.order-summary-footer button {
    width: 100%;
    padding: 12px;
    font-weight: 600;
    font-size: 1.05rem;
    border-radius: 50px;
    border: none;
    background: linear-gradient(135deg, #ff6600, #ff8c1a);
    color: white;
    transition: all 0.3s ease;
}

.order-summary-footer button:hover {
    background: linear-gradient(135deg, #ff8533, #ffb366);
    transform: scale(1.02);
    box-shadow: 0 4px 15px rgba(255, 102, 0, 0.3);
}
</style>

<div class="container order-page">
    <h2>ðŸ›’ Your Order</h2>

    {% if order_items %}
    <div class="table-responsive">
        <table class="table table-bordered table-striped text-center align-middle">
            <thead>
                <tr>
                    <th>Item</th>
                    <th>Price (â‚¹)</th>
                    <th>Quantity</th>
                    <th>Subtotal (â‚¹)</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for item in order_items %}
                <tr>
                    <td>{{ item.name }}</td>
                    <td>{{ item.price }}</td>
                    <td>
                        <div class="d-flex justify-content-center align-items-center">
                            <a href="{% url 'decrease_quantity' item.id %}" class="btn btn-outline-secondary btn-quantity">
                                <i class="bi bi-dash"></i>
                            </a>
                            <span class="mx-2">{{ item.quantity }}</span>
                            <a href="{% url 'increase_quantity' item.id %}" class="btn btn-outline-secondary btn-quantity">
                                <i class="bi bi-plus"></i>
                            </a>
                        </div>
                    </td>
                    <td>{{ item.subtotal }}</td>
                    <td>
                        <a href="{% url 'remove_from_cart' item.id %}" class="btn btn-danger btn-sm btn-remove">
                            <i class="bi bi-trash"></i> Remove
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="order-summary-footer">
        <div class="total">Total: â‚¹{{ order_total }}</div>

        <form method="POST" action="{% url 'place_order' %}">
            {% csrf_token %}
            <input type="text" name="customer_name" placeholder="Your Name" required>
            <input type="text" name="phone" placeholder="Phone Number" required>
            <button type="submit">âœ… Place Order</button>
        </form>
    </div>

    {% else %}
        <p class="text-center text-muted mt-4">Your order is empty. Go to <a href="{% url 'menu_page' %}">Menu</a> to add items.</p>
    {% endif %}
</div>
{% endblock %}
